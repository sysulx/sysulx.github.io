<html><head><title>sudoku</title></head><body><div id="main">	<div class="b">		<div id="sb00" class="sb" row="0" col="0">9</div>		<div id="sb00" class="sb sure" row="0" col="1">1</div>		<div id="sb00" class="sb right_border" row="0" col="2">3</div>		<div id="sb00" class="sb" row="1" col="0">7</div>		<div id="sb00" class="sb" row="1" col="1">8</div>		<div id="sb00" class="sb right_border sure" row="0" col="2">2</div>		<div id="sb00" class="sb" row="2" col="0">4</div>		<div id="sb00" class="sb sure" row="2" col="1">6</div>		<div id="sb00" class="sb right_border " row="0" col="2">5</div>	</div>	<div class="b"></div>	<div class="b"></div>	<div class="b"></div>	<div class="b"></div>	<div class="b"></div>	<div class="b"></div>	<div class="b"></div>	<div class="b"></div></div><div id='option'><input type='button' class='bt1' id='edit' value='edit' onclick='set()'/><input type='button' class='bt1' id='run' value='run' onclick='run()'/><input type='button' class='bt1' id='step' value='track' onclick='track()'/><input type='button' class='bt1' id='step' value='stop' onclick='clearTimeout(timer)'/><span id='note'>step interval: </span><span id='stepvalue'>500ms</span><input type='range' min="0" max="1000" id='interval' value='500' oninput="setinterval(this)"/><input type='button' class='bt2' id='load' value='master' onclick='master()'/><input type='button' class='bt1' id='clear' value='clear' onclick='clears()'/></div></body></html><style>* {padding:0;margin:0}body {background:#fff;}#main {float:left;width:456px;height:456px;border-left:2px solid black; border-top:2px solid black;/margin-left:100px; /margin-top:30px;}.b {padding-top:0.5px;float:left;width:150px;height:150px;border-right:2px solid black;border-bottom:2px solid black;}.sb {margin-top:0px;width:49px;height:49px;float:left;border:0.5px dashed black;/border-bottom:1.5px dashed black;}.sb {font-size:36px;text-align:center;}.sure {color:white;background:black}#option {float:left;width:200px;height:300px;/border:1px solid red;}.bt1 {display:block;width:60px;height:25px;margin-left:30px;margin-top:10px;}.bt2 {display:block;width:60px;height:25px;margin-left:30px;margin-top:50px;}#edit {margin-top:100px;}input[type="range"] {/display: block;padding:0;-webkit-appearance: none;background-color: #bdc3c7;width: 100px;height: 5px;border-radius: 5px;/margin: 0 auto;outline: 0;}input[type="range"]::-webkit-slider-thumb {-webkit-appearance: none;background-color: #c6c6c6;#e74c3c;width: 15px;height: 15px;border-radius: 50%;border: 1px solid white;cursor: pointer;transition: 0.3s ease-in-out;}#interval {margin-left:30px;margin-top:20px;}#note {margin-left:30px;margin-top:100px;position:relative;top:8px;}#stepvalue {margin-left:5px;margin-top:100px;position:relative;top:8px;}span {font-size:14px;}</style><script>var sd = [];for (var i=0; i<9;i++){	var temp = [];	for (var j=0; j<9; j++){		temp[j] = 0;	}	sd[i] = temp;}//show the sudoku panelfunction show(){	var s = "";	for (var i=0; i<3; i++){		for (var j=0; j<3; j++){			s += '<div class="b">';			for (var m=0; m<3; m++){				for (var n=0; n<3; n++){					var num = sd[i*3+m][j*3+n]==0?'':sd[i*3+m][j*3+n];					s += '<div id="sb'+(i*3+m)+(j*3+n)+'" class="sb" row='+(i*3+m)+' col='+(j*3+n)+'>'+num+'</div>';				}			}			s += '</div>'		}	}	document.getElementById("main").innerHTML = s}function clears(){	for (var i=0; i<9; i++){		for (var j=0; j<9; j++){			if (sd[i][j] == 0){				document.getElementById('sb'+i+j).innerHTML = '';			}		}	}}function set(){	var elms = document.getElementsByClassName('sb')	for (var i=0; i < elms.length; i++){		elms[i].style.cursor = 'pointer';		elms[i].onmouseover = function(){			this.style.background='yellow'			//alert()		}		elms[i].onmouseleave = function(){			this.style.background='white'			//alert()		}				elms[i].onclick = function(){			//alert(this.getAttribute("id"));			var number = prompt("输入数字");			//alert(number);			var ks = ['1','2','3','4','5','6','7','8','9']			var row = parseInt(this.getAttribute('row'))			var col = parseInt(this.getAttribute('col'))			if (ks.indexOf(number)>=0){			this.innerHTML = number;			sd[row][col] = parseInt(number)			this.style.background = "yellow";			this.onmouseover = function(){}			this.onmouseleave = function(){}			} else {				this.style.background='white'				this.innerHTML = ""				sd[row][col] = 0				this.onmouseover = function(){this.style.background='yellow'}				this.onmouseleave = function(){this.style.background='white'}			}		}	}}function run(){	result = []	var elms = document.getElementsByClassName('sb')	for (var i=0; i < elms.length; i++){		elms[i].onclick =function(){}		elms[i].onmouseleave = function(){}		elms[i].onmouseover = function(){}		elms[i].style.cursor = '';	}	var p = getfirst()	var start=new Date().getTime();	f10(p.i,p.j)	if(result.length != 0){		alert('共找到'+result.length+'组结果，执行'+record.length+'次尝试！\n用时'+(new Date().getTime()-start)/1000+'s')	for (var i = 0; i < 9; i++){		for(var j = 0;j<9;j++){			document.getElementById('sb'+i+j).innerHTML = result[0][i][j]		}	}	} else {		alert('无解！执行'+record.length+'次尝试！\n用时'+(new Date().getTime()-start)/1000+'s')	}}function getfirst(){	for(var i=0;i<9;i++){		for(var j=0;j<9;j++){			if(sd[i][j] == 0){				return {"i":i,"j":j}			}		}	}}function setinterval(obj){		document.getElementById("stepvalue").innerHTML = obj.value+"ms"	lapse = parseInt(obj.value)}show()//solve the sudoku problemfunction f11(i,d){	if (sd[i].indexOf(d)==-1)		return true;	return false;}function f12(j,d){	for (var i = 0; i < 9; i++){		if(sd[i][j]==d)			return false;	}	return true}function f13(i,j,d){	minr = parseInt(i/3)*3	minc = parseInt(j/3)*3	for (var m=0; m<3; m++){		for (var n=0; n<3; n++){			if (sd[minr+m][minc+n]==d)				return false;		}	}	return true;}function f1(i,j,d){	if (f11(i,d)&&f12(j,d)&&f13(i,j,d)){		return true;	}	return false;}var record = []var result = []function f2(i,j){	var rst = Object();	for(var m=j+1; m<9; m++){		if (sd[i][m]==0){			rst.m = i;			rst.n = m;			return rst		}	}	for(var m=i+1; m<9; m++){		for(var n=0; n<9; n++){			if(sd[m][n] == 0){				rst.m = m;				rst.n = n;				return rst			}		}	}	rst.m = 0	rst.n = 0	return rst;}var step_second = 1000;var dom = "";var key = 0;function f(i,j){	for (var d=1; d<10; d++){		if(f1(i,j,d)){			sd[i][j] = d			var rst = f2(i,j)			if (rst.m+rst.n == 0){				var tsd = [];				for (var x=0; x<9; x++){					var p = []					for(var y=0; y<9;y++){						p[y] = sd[x][y]					}					tsd[x] = p				}				result[result.length] = tsd;			} else {				console.log(rst.m+" "+rst.n+d)				//f(rst.m,rst.n)				//sd[rst.m][rst.n] = 0				//setandshow(rst.m,rst.n,0)			}		}	}	sd[i][j] = 0}var key = 0;function f3(i,j,d,flag){		if(flag==1){				if(f1(i,j,d)){			sd[i][j] = d			key = d			var dom = document.getElementById("sb"+i+j)			dom.style.background = "white"			dom.innerHTML = d			f3(i,j,key,2)			sleep(10)			//var it = setTimeout('f3(i,j,key,2)',10)		}				} else if (flag == 2){			var rst = f2(i,j)			if (rst.m+rst.n == 0){				var tsd = [];				for (var x=0; x<9; x++){					var p = []					for(var y=0; y<9;y++){						p[y] = sd[x][y]					}					tsd[x] = p				}				result[result.length] = tsd;			} else {				//console.log(rst.m+" "+rst.n+d)				f4(rst.m,rst.n)				sd[rst.m][rst.n] = 0				f3(i,j,d,3)				//setandshow(rst.m,rst.n,0)			}		} else { //flag == 3					}}function f4(i,j){	for(var d=1;d<10;d++){		f3(i,j,d,1)	}	sd[i][j]=0}function f5(i,j,d){	if(d < 10){		f3(i,j,d)		f5(i,j,d+1)	}}function f6(i,j){	f5(i,j,1)	sd[i][j] = 0}function f(i,j){	for (var d=1; d<10; d++){		if(f1(i,j,d)){			sd[i][j] = d						var rst = f2(i,j)			if (rst.m+rst.n == 0){				var tsd = [];				for (var x=0; x<9; x++){					var p = []					for(var y=0; y<9;y++){						p[y] = sd[x][y]					}					tsd[x] = p				}				result[result.length] = tsd;			} else {				console.log(rst.m+" "+rst.n+d)				f(rst.m,rst.n)				sd[rst.m][rst.n] = 0				//setandshow(rst.m,rst.n,0)			}		}	}	sd[i][j] = 0}var step = 0;var steps = []function f10(i,j){	for (var d=1; d<10; d++){		if(f1(i,j,d)){			sd[i][j] = d			step += 1;			record[record.length] = {"i":i,"j":j,"d":d}			var rst = f2(i,j)			if (rst.m+rst.n == 0){				var tsd = [];				for (var x=0; x<9; x++){					var p = []					for(var y=0; y<9;y++){						p[y] = sd[x][y]					}					tsd[x] = p				}				result[result.length] = tsd;				var ttp = []				for (var z = 0; z< record.length; z++){					ttp[ttp.length] = record[z]				}				steps[steps.length] = ttp			} else {				f10(rst.m,rst.n)				sd[rst.m][rst.n] = 0			}		}	}	sd[i][j] = 0	record[record.length] = {"i":i,"j":j,"d":0}}var tips = 0;var lapse = 500;var timer = 0;function track(){	var dom = document.getElementById("sb"+steps[0][tips].i+steps[0][tips].j)	if (steps[0][tips].d == 0){		dom.innerHTML = "";		//dom.style.background = "silver"	} else {		dom.innerHTML = steps[0][tips].d		//dom.style.background = "white"	}	tips += 1	if (tips < steps[0].length){		timer = setTimeout('track()',lapse)	}}function sleep(n){   var start=new Date().getTime();   while(true) if(new Date().getTime()-start>n) break;}function clearall(){	for(var i = 0; i< 9; i++){		for(var j=0; j< 9; j++){			if (sd[i][j]==0){				var dom = document.getElementById('sb'+i+j)				dom.innerHTML = "";				dom.style.background = "silver";			}		}	}}var mst = [[0, 0, 5, 3, 0, 0, 0, 0, 0],[8, 0, 0, 0, 0, 0, 0, 2, 0],[0, 7, 0, 0, 1, 0, 5, 0, 0],[4, 0, 0, 0, 0, 5, 3, 0, 0],[0, 1, 0, 0, 7, 0, 0, 0, 6],[0, 0, 3, 2, 0, 0, 0, 8, 0],[0, 6, 0, 5, 0, 0, 0, 0, 9],[0, 0, 4, 0, 0, 0, 0, 3, 0],[0, 0, 0, 0, 0, 9, 7, 0, 0]]function master(){	sd = mst;	var s = "";	for (var i=0; i<3; i++){		for (var j=0; j<3; j++){			s += '<div class="b">';			for (var m=0; m<3; m++){				for (var n=0; n<3; n++){					var num = sd[i*3+m][j*3+n]==0?'':sd[i*3+m][j*3+n];					s += '<div id="sb'+(i*3+m)+(j*3+n)+'" class="sb" row='+(i*3+m)+' col='+(j*3+n)+'>'+num+'</div>';				}			}			s += '</div>'		}	}	document.getElementById("main").innerHTML = s	for (var i=0; i<3; i++){		for (var j=0; j<3; j++){			for (var m=0; m<3; m++){				for (var n=0; n<3; n++){					if (sd[i*3+m][j*3+n] != 0){						document.getElementById('sb'+(i*3+m)+(j*3+n)).style.background='yellow'					}				}			}		}	}}</script>